var menu_data=[
    {
        name:"APPETIZER",
        id:"appetizers",
        dishes:[
                    {
                        name:"Black Pepper Paneer",
                        price:199,
                        category:"ASIAN",
                        type:"Veg",
                        img:"images/Black-Pepper-panner.JPG",
                        typeicon:"images/veg.svg",
                        details:"Wok tossed classic paneer and peppers stifired with a flavour rich pepper sauce.Perfect accompaniment to your Asian meal plans",
                        ingredients:"Cottage Cheese Cubes, Peppers, Onions, Chilies, Black Pepper Sauce"
                    },
                    {
                        name:"Honey Chicken Peppers",
                        price:199,
                        category:"PAN-ASIAN",
                        type:"Non-Veg",
                        img:"images/Honey-Chicken-Peppers.JPG",
                        typeicon:"images/non-veg.svg",
                        details:"Sugar, spice and everything nice is exactly what this Oriental-style hors d’oeuvre is! Deboned chicken leg, diced, marinated in soy-infused hot sauce is deep fried, tossed with assorted bell pepper, chilli, garlic and honey to deliver a contrasting but well-balanced sweet and hot punch.",
                        ingredients:"Chicken, Honey, Pepper , Chilli , Onion , Bell Pepper"
                    },
                    {
                        name:"Ghee-Roast Chicken",
                        price:219,
                        category:"INDIAN",
                        type:"Non-Veg",
                        img:"images/ghee-roast-chicken.JPG",
                        typeicon:"images/non-veg.svg",
                        details:"Chicken marinated overnight in our specially crafted ghee-roast masala are cradled and cooked in a tomato-based gravy whose flavours are heightened by curry leaves. Must-Have!",
                        ingredients:"Chicken Leg Boneless, Hung Curd, Onion, Tomato, Indian Spices,, Curry Leaves"
                    },
                    {
                        name:"Veggies in Chilli-Garlic Sauce",
                        price:169,
                        category:"PAN-ASIAN",
                        type:"Veg",
                        img:"images/Veggies-in-Chilli-Garlic-Sauce.JPG",
                        typeicon:"images/veg.svg",
                        details:"Batter-fried veggies are tossed in a chilli-garlic sauce along with onions and spices, garnished with spring onion. This is your go-to Starter when you want a little bit of",
                        ingredients:"Carrot, Babycorn, Mushroom, Cauliflower, Zuchhini, Potato, Onions, Chilli Garlic Sauce, Spring Onion, Soya Sauce, Oyster Sauce"
                    },
                    {
                        name:"Pan-Fried Chilli Fish",
                        price:279,
                        category:"PAN-ASIAN",
                        type:"Non-Veg",
                        img:"images/Pan-Fried-Chilli.JPG",
                        typeicon:"images/non-veg.svg",
                        details:"Another hot favourite is back on the menu! Pan-fried basa fish fillets are marinated in spicy burnt chilli garlic and finished with a light drizzle of hoisin chilli sauce. Finger-licking satisfaction guaranteed.",
                        ingredients:"Basa Fillet, Egg, Red Chilli , Garlic , Ginger , Chinese Wine , Vinegar , Light Soy Sauce"
                    },
                    {
                        name:"Garlic Bread Supreme",
                        price:159,
                        category:"CONTINENTAL",
                        type:"Veg",
                        img:"images/Garlic-bread-supreme.JPG",
                        typeicon:"images/veg.svg",
                        details:"This savoury snack has olives, chili peppers and oozy mozzarella cheese spread generously on toasted bread and baked. Simply finger-licking we say!",
                        ingredients:"Hot Dog Bun, Parsley Garlic-Butter, Mozzarella , Bell Pepper , Olive"
                    }
        ]   
    },
    {
        name:"WOK STATION",
        id:"wokstation",
        dishes:[
                    {
                        name:"Nasi Goreng",
                        price:239,
                        category:"ASIAN",
                        type:"Non-Veg",
                        img:"images/nasi-goreng.JPG",
                        typeicon:"images/non-veg.svg",
                        details:"Indonesian fried-rice, also known as 'Nasi Goreng' is a popular dish in Southeast Asia. It comes with fried rice tossed with chicken cubes, bok choy, broccoli, Chinese cabbage with peanuts added for a crunch.",
                        ingredients:"Rice, Chicken Cube, Bok Choy,, Broccoli, Chinese Cabbage"
                    },
                    {
                        name:"Dan-Dan Chicken Noodels",
                        price:219,
                        category:"725 CAL I LOW CALORIE",
                        type:"Non-Veg",
                        img:"images/dan-dan.jpg",
                        typeicon:"images/non-veg.svg",
                        details:"Minced chicken cooked in a piquant broth of chicken stock, Shaoxing wine, Hoisin sauce and Sichuan peppercorns is served with noodles and sir-fried with veggies – street-food, Sichuan style! Serves 1.",
                        ingredients:"Chicken, Noodles, Bell Pepper, Cabbage, Carrot, Red Chilli, Cinnamon, Star Anise, Shoaxing Wine, Sesame Oil, Sichuan Pepper, Five Spice Powder, Hoisin Sauce"
                    },
                    {
                        name:"American Lo Mein",
                        price:199,
                        category:"PAN-ASIAN",
                        type:"Veg",
                        img:"images/american-lo-mein.jpg",
                        typeicon:"images/veg.svg",
                        details:"Comfort food at its best, our bowl of American Lo Mein is just the umami kick you are looking for! Fresh assorted veggies and steaming-hot noodles straight out of the boiling pot are tossed in a sweet and hot Teriyaki-based sauce.",
                        ingredients:"Noodles, Carrot, Broccoli, Bell Pepper, Button Mushroom, Baby Corn, French Bean, Spinach, Bok Choy, Cabbage, Light Soy Sauce, Dark Soy Sauce,Teriyaki Sauce"
                    }
        ]   
    },
    {
        name:"CONTINENTAL",
        id:"continental",
        dishes:[
                    {
                        name:"Penne Arrabbiata",
                        price:199,
                        category:"309 CAL I LOW CALORIE",
                        type:"Veg",
                        img:"images/Penne-Arrabbiata.JPG",
                        typeicon:"images/veg.svg",
                        details:"A handful of seasonal vegetables and penne done just right are tossed in a chunky tomato-concasse simmered in chilli oil. Finished with a glug of olive oil, torn basil, chilli flakes and cheese, our Penne Arrabbiata will pleasantly surprise you!",
                        ingredients:"Penne, Tomato, Zucchini, Red Chilli Flakes, Bell Pepper, Broccoli, Carrot, Basil, Oregano, White Wine Vinegar, Olive Oil"
                    },
                    {
                        name:"Mac 'n' Arrabbiata",
                        price:199,
                        category:"CONTINENTAL",
                        type:"Veg",
                        img:"images/mac.jpg",
                        typeicon:"images/veg.svg",
                        details:"This herb-crusted pasta will pleasantly surprise you. Al dente macaroni, fresh from the boiling pot, is tossed with zucchini, pepper, carrot, broccoli and a freshly made tomato-basil sauce. Serves 1.",
                        ingredients:"Macaroni, Tomato, Zucchini , Red-Chilli Flakes , Bell Pepper , Broccoli , Carrot , Basil , Oregano , White-Wine Vinegar , Olive Oil"
                    },
                    {
                        name:"Loaded Chicken Steak Bowl",
                        price:249,
                        category:"CONTINENTAL",
                        type:"Non-Veg",
                        img:"images/Loaded.jpg",
                        typeicon:"images/non-veg.svg",
                        details:"This Steak bowl has succulent chicken marinated, seared, baked to perfection. Cooked in a delish BBQ sauce in-house, it is served on a bed of herbed rice and crunchy sautéed veggies.",
                        ingredients:"Chicken, Rice, Garlic, Rosemary, BBQ Sauce, Worcestershire Sauce, Dijon Mustard, Butter, Zucchini,, Bell Pepper, Mushroom, Broccoli"
                    },
                    {
                        name:"Penne Alfredo",
                        price:199,
                        category:"CONTINENTAL",
                        type:"Veg",
                        img:"images/PenneAlfredo.jpg",
                        typeicon:"images/veg.svg",
                        details:"Penne pasta tossed in a luscious alfredo sauce along with veggies, finished off with fresh parsley and grated cheese. Bring out the Kid-in-You!",
                        ingredients:"Penne, Parmesan, Broccoli, Bell Pepper, Olive, Béchamel, Nutmeg"
                    }
        ]   
    },
    {
        name:"INDIAN/THALIS",
        id:"indianthalis",
        dishes:[
                    {
                        name:"Homestyle Thali 'n' Cake slice",
                        price:199,
                        category:"NORTH INDIAN",
                        type:"Veg",
                        img:"images/homestyle.JPG",
                        typeicon:"images/veg.svg",
                        details:"This thali contains jeera rice, dal makhani, pickle, paratha, aloo-carrot-beans veg,boondi raita. Served with homemade cake slice",
                        ingredients:"Jeera Rice, Dal Makhani, Pickle, Aloo-Carrot-Beans Veg, Paratha, Boondi Raita"
                    },
                    {
                        name:"Butter Chicken with Jeera Rice",
                        price:199,
                        category:"INDIAN",
                        type:"Non-Veg",
                        img:"images/butter-chicken.jpg",
                        typeicon:"images/non-veg.svg",
                        details:"A rich buttery, tomato and cream-based gravy and tossed in the tikkas to soften them. This touch of genius gave birth to the indispensable – Butter Chicken. Served with aromatic, steamed jeera-flavoured rice, our homage to this staple is a MUST TRY. Serves 1.",
                        ingredients:"Chicken Leg Boneless, Jeera Rice, Makhni Gravy, Kasturi Methi, Cashew Nut"
                    },
                    {
                        name:"Butter-Chicken Thali",
                        price:209,
                        category:"NORTH INDIAN",
                        type:"Non-Veg",
                        img:"images/butter-thali.jpg",
                        typeicon:"images/non-veg.svg",
                        details:"This Chicken Combo has Dal Makhani, Butter Chicken,Tawa Pulao, Paratha and pickle",
                        ingredients:"Dal Makhani, Butter Chicken, Tawa Masala Pulao, Salad, Pickle,, Paratha, Basmati Rice"
                    }
        ]   
    },
    {
        name:"SNACKS",
        id:"snacks",
        dishes:[
                    {
                        name:"Smoky Chicken & Cheese Focaccia",
                        price:189,
                        category:"CONTINENTAL",
                        type:"Non-Veg",
                        img:"images/Smoky-Chiken.JPG",
                        typeicon:"images/non-veg.svg",
                        details:"Smoked and cured chicken layered with freshly sliced iceberg lettuce, tomatoes, cucumber; topped with cheese and sandwiched between home-made wholewheat rosemary chilli focaccia bread. Energy (Kcal)-386, Fat (g)-20, Carbs (g)-30, Fiber (g)-2, Protein (g)-23, Sugar(g)-7.",
                        ingredients:"Chicken,Focaccia Bread, Iceberg Lettuce, Tomatoes, Cucumber,, Cheese"
                    },
                    {
                        name:"Minty Cottage Chese Focaccia",
                        price:189,
                        category:"CONTINENTAL",
                        type:"Veg",
                        img:"images/minty.jpg",
                        typeicon:"images/veg.svg",
                        details:"Grilled cottage cheese steaks coated with mint pesto are layered between wholewheat rosemary chilli focaccia bread with a tangy carrot spread. There's nothing like a well-balanced sandwich to conquer hunger!",
                        ingredients:"Paneer, Wholewheat Rosemary Chilli Focaccia Bread, Mint, Carrot Spread, Jalapenos , Tomatoes , Cucumber"
                    },
                    {
                        name:"Italian Sausage Omelette",
                        price:155,
                        category:"447 CAL I HIGH PROTEIGN",
                        type:"Non-Veg",
                        img:"images/Italian.jpg",
                        typeicon:"images/non-veg.svg",
                        details:"ENERGY (KCAL)- 447.23,Fat (g)-31.44, Carbs (g)-24.3,Fiber (g)-2.68,Protein (g)-17.08, Sugar(g)-3.36 The brekkie classic, the omelette, gets a mighty, meaty twist! This fluffy celebration of beaten eggs is stuffed with oodles of cheese, peppers and sausage cubes. Good for an anytime quick meal. Served with hash brown potato.",
                        ingredients:"Sausages, Eggs, Peri Peri Seasoning, Onion, Tomato, Parsley, Cheese, Hash Brown Potato, Herbs Seasoning, Tri Peppers"
                    }
        ]   
    },
    {
        name:"FIT N FAB",
        id:"fitnfab",
        dishes:[
                    {
                        name:"Teriyaki Chicken Quinoa Superbowl",
                        price:249,
                        category:"624 CAL I LOW CARB",
                        type:"Non-Veg",
                        img:"images/TeriyakiChicken.JPG",
                        typeicon:"images/non-veg.svg",
                        details:"This Teriyaki Chicken Quinoa Bowl is a perfect healthy meal option for lunch or dinner. Featuring a juicy chicken leg, diced and marinated in Teriyaki sauce. Served with a delicious bell pepper quinoa brown rice. It's high in protein, fiber, healthy and delicious! ENERGY (KCAL): 624, Fat (g)- 19, Carbs (g)-76, Fiber (g)-4, Protein (g)- 28.",
                        ingredients:"Chicken Leg Boneless, Quinoa Brown Rice,Light Soy , Chilli Paste , Garlic , Sesame Seeds., Egg, Bell Peppers, Onion, Leeks."
                    },
                    {
                        name:"Ultimate Quinoa Burrito",
                        price:239,
                        category:"CONTINENTAL",
                        type:"Veg",
                        img:"images/Ultimate.jpg",
                        typeicon:"images/veg.svg",
                        details:"This bowl contains mexican quinoa brown rice loaded with toppings to give you a full-satisfying meal. Fresh paneer cubes, corn-bean,tangy tomato salsa and sour cream garnished with jalapeno and cheese. Packed with a burst of flavours.",
                        ingredients:"Quinoa Brown Rice, Tomato, Paneer,Sweet Corn, Onion, Jalapeno, Black Olives, Red-Kidney Beans, Cheese,"
                    },
                    {
                        name:"Stir-Fried Chilli Paneer Superbowl",
                        price:229,
                        category:"358 CAL I HIGH PROTEIGN",
                        type:"Veg",
                        img:"images/stir-fried.jpg",
                        typeicon:"images/veg.svg",
                        details:"This peppery, spicy, and tangy chilli-infused dish is popular on our list of starters and appetizers. When served with a quinoa brown fried rice, this Indo-Chinese combo packs a mean, healthy punch. Serves 1.",
                        ingredients:"Paneer, Brown Rice, Quinoa, Bell Pepper, Green Bean, Bok Choy, Broccoli, Red Chilli, Light Soy Sauce, Dark Soy Sauce, Vinegar"
                    }
        ]   
    },
    {
        name:"BIG BIRIYANI CO.",
        id:"bigbiriyanico.",
        dishes:[
                    {
                        name:"Hyderbadi Dum Chicken Biriyani",
                        price:219,
                        category:"NORTH INDIAN",
                        type:"Non-Veg",
                        img:"images/HyderbadiDum.JPG",
                        typeicon:"images/non-veg.svg",
                        details:"Chicken dum biryani is an evergreen classic. Marinated chicken curry cut is cooked with Indian spices and the biriyani gravy, layered with rice and topped with mint coriander leaves and brown onion. It not only sounds yummy but tastes too. Order now!",
                        ingredients:"Basmati Rice, Chicken, Green Cardamom , Cumin , Bayleaf , Black Pepper , Cloves , Green Chilli Paste , Ginger Garlic Paste , Mint Leaves , Coriander Leaves , Ghee , Turmeric , Garam Masala , Curd , Lemon Juice , Rose Water"
                    },
                    {
                        name:"Ghee-Roast Chicken Biriyani (1 KG)",
                        price:499,
                        category:"SOUTH INDIAN",
                        type:"Non-Veg",
                        img:"images/ghee-roast.jpg",
                        typeicon:"images/non-veg.svg",
                        details:"Chicken ghee roast is a very popular dish. Cooked chicken and rice are layered in a pot and then dum cooked for sometime. This is an absolute delight to eat. Paired with Raita.",
                        ingredients:"Chicken Leg Boneless, Hung Curd, Ghee, Coriander, Curry Leaves And Haricot Beans, Carrot"
                    },
                    {
                        name:"Stir-Fried Chilli Paneer Superbowl",
                        price:229,
                        category:"SOUTH INDIAN",
                        type:"Non-Veg",
                        img:"images/GheeRoastBiriyani.jpg",
                        typeicon:"images/non-veg.svg",
                        details:"Chicken ghee roast is a very popular dish. Cooked chicken and rice are layered in a pot and then dum cooked for sometime. This is an absolute delight to eat. Paired with Raita.",
                        ingredients:"Chicken Leg Bonelessr, Hung Curd, Ghee, Coriander, Curry Leaves And Haricot Beans, Carrot"
                    }
        ]
    }
]


var itemArr = []; 

var isToggle = false;
var tooglebtn = null;

var searchContainer = null
var searchCategory = null;

var searchCategoryObj = {};

var showSearch = null;
var hideSearch = null;

var searchInput = "";

var cartArr = [];

window.addEventListener('load',renderDOM)



function renderDOM(){

    
    
    document.getElementById('veg-toogle-btn').addEventListener('click',toogle)
    
    searchInput = document.getElementById('search-input-element')
    
    searchInput.addEventListener('keyup',reRenedrSearch);
    searchInput.addEventListener('keyup',renderSearch)
    
    
    seachContainer = document.getElementById('search-item-container')
    showSearch = document.getElementById('show-search-result');
    hideSearch = document.getElementById('hide-search-categorie');

    searchCategory = document.getElementById('search-item-category')

    var menu = document.querySelector('#menu')
    for(var i = 0; i < menu_data.length; i++){
    
        var currentMenu = document.createElement('div');
        currentMenu.setAttribute('class','menu-1');
        currentMenu.setAttribute('id',menu_data[i].id)
        menu.appendChild(currentMenu);
    
        currentMenu.innerHTML = '<div class="menu-heading">' + menu_data[i].name + '</div>' +
                                '<div class="item-container"></div>'
        var itemContainer = currentMenu.querySelector('.item-container')
        
        for(var j = 0; j < menu_data[i].dishes.length;j++){
            var currentDish = menu_data[i].dishes[j];
            
            var item = document.createElement('div');
            item.setAttribute('class','item '+currentDish.type);
    
            item.innerHTML ='<div class="category"><img src="'+currentDish.typeicon+'" alt="veg-icon"><div>'+ currentDish.category +'</div></div>'+
                            '<a><div class="item-img-container"><img src="'+currentDish.img+'" alt="item-img"></div></a>'+
                            '<div class="item-name">'+currentDish.name+'</div>'+
                            '<div class="item-price-button flex flex-space-between flex-align-center">'+
                                '<div class="item-price">&#x20B9;<span>'+currentDish.price+'</span></div>'+
                                '<div><button class="add-button">ADD<span>+</span></button></div>'+
                            '</div>'+
                            '<div class="customisable">Customisable</div>'

            if(!searchCategoryObj[currentDish.category]){
                searchCategoryObj[currentDish.category] = 1;
            }
            
            item.querySelector('.add-button').addEventListener('click',addToCart)

            var link = item.querySelector('a');
            link.addEventListener('click',getInfoOnProduct);

            itemArr.push(item);
            itemContainer.appendChild(item);
        }
        
    }
    
    renderRecentSearch();

    var keys = Object.keys(searchCategoryObj);
    for(var i = 0; i < keys.length; i++){
        var aTag = document.createElement('a')
        aTag.textContent = keys[i];
        aTag.addEventListener('click',generateCategory);
        searchCategory.appendChild(aTag)
    }
    
}


function renderRecentSearch(){
    
    var recentSearch = document.querySelector('.recent-search-items')

    recentSearch.innerHTML = "";

    var searchArr = JSON.parse(localStorage.getItem('search'));

    for(var i = searchArr.length-1; i >=  searchArr.length - 6; i--){
        var div = document.createElement('div');
        div.textContent = searchArr[i];
        recentSearch.appendChild(div);
    }
}

function generateCategory(event){
    var toSearch = event.path[0].textContent
    hideSearch.style.display = "none"
    showSearch.style.display = "block"
    console.log(toSearch)
    for(var i = 0; i < itemArr.length; i++){
        var category= itemArr[i].querySelector('.category > div').textContent
        if(toSearch === category){

            
                seachContainer.appendChild(itemArr[i])
            
        
        }
        }

    var searchArr = JSON.parse(localStorage.getItem('search'));
        
    searchArr.push(toSearch)

    console.log(searchArr)

    localStorage.setItem('search',JSON.stringify(searchArr))

    renderRecentSearch();
}



function getInfoOnProduct(event){
    var itemName = event.path[3].querySelector('.item-name').textContent;
    var itemObj = null;
    for(var i = 0; i < menu_data.length; i++){
        for(var j = 0; j < menu_data[i].dishes.length; j++){
            if(menu_data[i].dishes[j].name === itemName){
                itemObj = menu_data[i].dishes[j]
                localStorage.setItem('Item',JSON.stringify(itemObj));
                break;
            }
        }
        if(itemObj){
            break;
        }
    }
    window.location = "item.html"
}


function toogle(){
    var toggleBtn = document.getElementById('veg-toogle-btn')
    var filterIcn = document.getElementById('filterIcon');
    
    if(!isToggle){
        toggleBtn.style.setProperty('color','green')
        toggleBtn.style.setProperty('border','2px solid green')
        filterIcn.style.setProperty('color','yellow')

        for(var i = 0; i < itemArr.length; i++){
            if(itemArr[i].getAttribute('class') === 'item Non-Veg'){
                itemArr[i].style.setProperty('display','none');
            }
        }
        isToggle = true;
    }
    else{
        toggleBtn.style.setProperty('color','black');
        toggleBtn.style.setProperty('border','1px solid black');
        filterIcn.style.setProperty('color','black')

        for(var i = 0; i < itemArr.length; i++){
            if(itemArr[i].getAttribute('class') === 'item Non-Veg'){
                itemArr[i].style.setProperty('display','block');
            }
        }
        isToggle = false;
    }
    
}

function openSearch(){
    document.querySelector('.search-remove').style.display = "none";
    document.getElementById('search-menu').style.display = "block"
}

function renderSearch(){
    
    hideSearch.style.display = "none"
    showSearch.style.display = "block"
    
    var toSearch = document.getElementById('search-input-element').value;

    if(toSearch.length === 0){
        hideSearch.style.display = "block"
        showSearch.style.display = "none"
    }
    else{
        for(var i = 0; i < itemArr.length; i++){
            var name = itemArr[i].querySelector('.item-name').textContent
            if(toSearch.length >= 3){
    
                if(name.includes(toSearch)){

                    var cln = itemArr[i].cloneNode(true);
                    seachContainer.appendChild(cln)
                }
            
            }
            }
        
    }
}

function closeSearch(){
    document.querySelector('.search-remove').style.display = "block";
    document.getElementById('search-menu').style.display = "none"
}

function reRenedrSearch(){

document.getElementById('search-item-container').innerHTML = ""

}

function returnToSearch(){

    hideSearch.style.display = "block"
    showSearch.style.display = "none"
    seachContainer.innerHTML = ""
}


function openLocation(){
    document.getElementById("main-page").style.setProperty('display','none');
    document.getElementById("location-box").style.setProperty('display','block');
}

function closeLocation(){
    document.getElementById("main-page").style.setProperty('display','block');
    document.getElementById("location-box").style.setProperty('display','none');
    console.log("event trigered")
}

function openMobileLink(){
    document.getElementById("main-page").style.setProperty('display','none');
    document.getElementById("app-link").style.setProperty('display','block');
}

function closeMobileLink(){
    document.getElementById("main-page").style.setProperty('display','block');
    document.getElementById("app-link").style.setProperty('display','none');
}

function showCart(){

    document.getElementById('main-page').style.width = "calc(100% - 300px)"
    var cart = document.querySelector('.cart')
    cart.style.display = "block"
}

function closeCart(){
    document.getElementById('main-page').style.width = "100%"
    var cart = document.querySelector('.cart')
    cart.style.display = "none"
}


function addToCart(event){
    
    var item = event.path[3]

    var addBtn = item.querySelector('.add-button');

    addBtn.textContent = "IN CART";

    cartArr.push(item);

    addBtn.removeEventListener('click',addToCart);

    var cart = document.querySelector('.cart-items');

    var image = ""
   
    
    var cart_item = document.createElement('div');

    cart_item.setAttribute('class',"cart-item-container");

    if(item.getAttribute('class') === "item Veg"){
        image = "images/veg.svg"
    }

    else
    {
        image = "images/non-veg.svg"

    }

    cart_item.innerHTML =   '<div class="cart-item">'+'<img src="'+ image +'" alt="veg-icon" style="height:50%">'+
                            '<div class = "item-cart-name">'+ item.querySelector('.item-name').textContent +'</div>'+
                            '<div class="quantity"><span class="minus">-</span><span class="qty"> 1 </span><span class="plus">+</span></div>'+
                            '</div>'+
                            '<div class="item-price-container">&#x20B9;<span class="item-cart-price">'+item.querySelector('.item-price > span').textContent+'</span></div>'
    
    cart_item.querySelector('.plus').addEventListener('click',increment)
    cart_item.querySelector('.minus').addEventListener('click',increment)
    
    cart.appendChild(cart_item);

    updateTotal();
    showCart();

}

function increment(event){
    
    
    var qty = event.path[1].querySelector('.qty')
    var itemPrice = event.path[3].querySelector('.item-cart-price');
    var price = Number(itemPrice.textContent)
    var num = qty.textContent.trim();

    if(event.path[0].getAttribute('class') === 'plus'){
        
        qty.textContent = ++num;
        
        itemPrice.textContent = num * Math.floor(price/(num-1));    
    }
    else{
        
        if(num === "1"){
            event.path[3].remove();
            updateAddBtn(event.path[3].querySelector('.item-cart-name').textContent);
        }
        else{
            qty.textContent = --num;
            itemPrice.textContent = (num) * Math.floor(price/(num+1));
        }
        
    }

    updateTotal();
}

function updateAddBtn(itemName){

for(var i = 0; i < cartArr.length; i++){
    if(cartArr[i].querySelector('.item-name').textContent === itemName){
        var addBtn = cartArr[i].querySelector('.add-button');
        addBtn.innerHTML = "ADD<span>+</span>";
        addBtn.addEventListener('click',addToCart);
        break;
    }
}
}

function updateTotal(){
    var cartItems = document.querySelectorAll('.cart-item-container')
    var totalItems = 0;
    var total = 0;

    for(var i = 0; i < cartItems.length; i++){
        total += Number(cartItems[i].querySelector('.item-cart-price').textContent);
        totalItems += Number(cartItems[i].querySelector('.qty').textContent)
    }

    if(totalItems > 0){
        document.getElementById("Iconcart").setAttribute('class','cartIcon');
        var qtyDiv = document.querySelector('.cartno');
        qtyDiv.textContent = totalItems;
        qtyDiv.style.display = "block"
    }
    else{
        
        document.getElementById("Iconcart").removeAttribute('class','cartIcon');
        var qtyDiv = document.querySelector('.cartno');
        qtyDiv.textContent = totalItems;
        qtyDiv.style.display = "none"

    }

    document.querySelector('.total-amount').textContent = total;
    document.querySelector('#total-items').textContent = totalItems + " items";
    
    
}
